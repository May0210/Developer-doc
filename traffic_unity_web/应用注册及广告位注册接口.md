# 1、接入说明

### 1.1 接入条件

确保账号审核通过。

需要相关的开发者id和密钥，请联系商务合作经理获取。

该接口适用于2018年及以后产生的。

### 1.2 接口风格

采用restfull api风格

以http状态码来表明请求资源的状态

### 1.3 接口限制

采用签名验证的方式来验证权限

验证通过后, 同一资源每天最多可请求100次

### 1.4 接口的验证

开发者审核通过后,请求接口需要带三个参数

| 参数 | 描述 |
| ----- | ----- |
| signature | 加密签名，signature结合了开发者的密钥参数和请求中的timestamp参数、 nonce参数。|
| timestamp | 时间戳 |
| nonce | 随机数 |


加密/校验流程如下：

    1.将token、timestamp、nonce三个参数进行字典序排序

    2.将三个参数字符串拼接成一个字符串进行sha1加密

    3.开发者获得加密后的字符串可与signature对比，标识该请求合法

检验signature的golang示例代码：

    func Sha1Encode(str string) string {
        sha := sha1.New()
        sha.Write([]byte(str))
        bs := sha.Sum(nil)

        return fmt.Sprintf("%x", bs)
    }

    // 检验signature
    func CheckSignatureRule(token, signature, timestamp, nonce string) bool {
        tmp_arr := []string{token, timestamp, nonce}
        sort.Strings(tmp_arr)
        tmp_str := strings.Join(tmp_arr, "")
        signature_real := Sha1Encode(tmp_str)

        if signature != signature_real {
            return true
        }

        return false
    }

### 1.5 响应的数据格式

数据格式为json

字段说明

error 错误信息,当请求有误时的提示文字

data 数据相关信息

### 1.6 http状态码 常见业务释义
| http 状态码 | 释义 |
| ------------|---------- |
| 200 | 获取成功|
| 400 | 请求参数有误,请检查参数 |
| 401 | 用户验证有误,请检查验证信息 |
| 403 | 禁止访问,有可能超出了请求次数限制 |

# 2、开发者-创建应用
### 2.1描述
 开发者创建应用，每天最多请求100次

### 2.2 接口信息

|url|method|说明|
|------|------|------|
|report_api/developer/ssp/{dev_uuid}/app|POST|dev_uuid为开发者id|

请求url示例：

    http://imweb.yumimobi.com/report_api/developer/ssp/yumi5pc8djb37vzjl0zr/app?signature=a815ebea59d5e223f19cd1598f8ccd1adf4ed25m&timestamp=1528707294&nonce=84

### 2.3 请求说明
#### 2.3.1 path参数
|字段|数据类型|说明|是否必填|
|-------|-------|-------|-------|
|{dev_uuid}|string|位于url中，为开发者id|是|

#### 2.3.2 body体json参数
|字段|数据类型|说明|是否必填|
|-------|-------|-------|-------|
|os_channel|int64|系统渠道(对应页面应用商店).1=Google Play,2=App Store,3=中国Android渠道|是|
|join_style|int|接入方式.1=SDK,2=API|是|
|cate_first_id|int64|[关联获取]一级分类Id,[应用类型列表](#cate)|是|
|cate_id|int64|[关联获取]二级分类Id，[应用类型列表](#cate)|是|
|app_store_id|int64|发布渠道:<br>1=Google Play商店(Android)(os_channel=1);<br>27=iTunes App Store(iOS)(os_channel=2);<br>其他值=中国Android渠道(os_channel=3);<br>[应用商店列表](#store)|是|
|download_url|string|应用地址|是|
|name|string|应用名称|是|
|bundle|string|应用包名|是|

请求JSON示例：

    {
        "name": "消灭星星",
        "join_style": 2,
        "os_channel": 3,
        "bundle": "com.xmxx.com",
        "download_url": "https://www.baidu.com",
        "cate_first_id": 5,
        "cate_id": 7,
        "app_store_id": 3
    }

### 2.4 响应信息

|字段|数据类型|说明|
|-------|-------|-------|
|error|string|成功为空，失败显示错误内容|
|name|string|应用名称|
|app_uuid|string|对外提供的应用id|
|status|int|审核状态.0=待审核，1=审核通过，-3=审核不通过，2=暂停，3=冻结，4=封禁|

响应JSON示例：

    {
        "error": "",
        "data": {
            "name": "消灭星星",
            "app_uuid": "k5pukapy",
            "status": 1
        }
    }

# 3、开发者-应用审核状态
### 3.1 描述

获取应用的审核状态，一次最多可以获取100个应用的审核状态，每天最多请求100次

### 3.2 接口信息
|url|method|说明|
|-----|-----|-----|
|/report_api/devloper/ssp/{dev_uuid}/app|GET|dev_uuid为开发者id|

请求url示例：

    http://imweb.yumimobi.com/report_api/developer/ssp/yumi5pc8djb37vzjl0zr/app?signature=a815ebea59d5e223f19cd1598f8ccd1adf4ed25m&timestamp=1528707294&nonce=84&app_uuid=k5pukapy,4j0qu4ac,l6x65z75

### 3.3 请求说明

|字段|数据类型|说明|是否必填|
|-----|-----|-----|-----|
|{dev_uuid}|string|位于url中，为开发者id|是|
|app_uuid|string|应用id，一次可查询多个，多个之间用','分割|是|

### 3.4 响应信息

|字段|数据类型|说明|
|-------|-------|-------|
|error|string|成功为空，失败显示错误内容|
|name|string|应用名称|
|app_uuid|string|对外提供的应用id|
|status|int|审核状态.0=待审核，1=审核通过，-3=审核不通过，2=暂停，3=冻结，4=封禁|

响应JSON示例：

    {
        "error": "",
        "data": [
            {
                "name": "消灭星星1",
                "app_uuid": "3on76zm2",
                "status": 1
            },
            {
                "name": "消灭星星2",
                "app_uuid": "9sv1a62a",
                "status": 1
            },
            {
                "name": "消灭星星3",
                "app_uuid": "rll0vmer",
                "status": 1
            }
        ]
    }


# 4、开发者-创建广告位
### 4.1 描述
开发者创建广告位，广告位一次最多可创建5个，每天最多请求100次

### 4.2 接口信息
|url|method|说明|
|-----|-----|-----|
|report_api/developer/ssp/{dev_uuid}/slot|POST|dev_uuid为开发者id|

请求url示例：

    http://imweb.yumimobi.com/report_api/developer/ssp/yumi5pc8djb37vzjl0zr/slot?signature=a815ebea59d5e223f19cd1598f8ccd1adf4ed25m&timestamp=1528707294&nonce=84

### 4.3 请求信息

注：原生广告img、icon、title、data可都填值，也可选择其中一个。
#### 4.3.1 path参数
|字段|数据类型|说明|是否必填|
|-----|-----|-----|-----|
|{dev_uuid}|string|位于url中，为开发者id|是|

#### 4.3.2 body体json参数
|字段|数据类型|说明|是否必填|
|-----|-----|-----|-----|
|app_uuid|string|应用id|是|
|materials|string|支持元素.video:1=图片,2=html,3=html5url; others:1=图片,2=图文,3=文本,4=html,5=视频,6=html5url；如果是原生广告此字段不用填写|否|
|name|string|广告位名称|是|
|refresh_duration|int|刷新时长(秒)，如果广告位类型为banner此字段可填15或30或45;其他广告位类型不填|否|
|type|int|广告位类型.1=banner,2=插屏,3=激励视频,4=原生,5=开屏|是|
|img|string|原生广告图片类型，原生元素为图片时填写此字段为"img"|否|
|img_width|string|图片宽，原生广告原生元素为图片时填写此字段|否|
|img_height|string|图片高，原生广告原生元素为图片时填写此字段|否|
|icon|string|原生广告icon类型，原生元素为icon时此字段为"icon"|否|
|title|string|原生广告标题类型。原生元素为标题填写此字段为"title"|否|
|data|string|原生广告描述类型。原生元素为描述时填写此字段为"data"|否|


请求JSON示例：

    [{
        "app_uuid": "k5pukapy",
        "materials": "",
        "name": "广告位2",
        "refresh_duration": 30,
        "type": 4,
        "img": "img",
        "img_width": "190",
        "img_height": "198",
        "icon": "icon",
        "title": "title",
        "data": ""
    }, {
        "app_uuid": "k5pukapy",
        "materials": "1,2,3,4,6",
        "name": "广告位3",
        "refresh_duration": 30,
        "type": 1,
        "img": "",
        "img_width": "",
        "img_height": "",
        "icon": "",
        "title": "",
        "data": ""
    }]

### 4.4 响应信息


|字段|数据类型|说明|
|-------|-------|-------|
|error|string|成功为空，失败显示错误内容|
|uuid|string|广告位UUID|
|name|string|广告位名称|
|type|int|广告类型.1=banner,2=插屏,3=激励视频,4=原生,5=开屏|

响应JSON示例:

    {
        "error": "",
        "data": [
            {
                "uuid": "7jcddpp6",
                "name": "广告位2",
                "type": 4,
            },
            {
                "uuid": "1yfubk3c",
                "name": "广告位3",
                "type": 1,
            }
        ]
    }


<span id="store"></span>

# 5、应用商店

|商店id|名称|名称(英文)|操作系统(1=android,2=ios)|系统渠道(1=Google Play,2=App Store,3=中国Android渠道)|
|-------|-------|-------|-------|-------|
|1|Google play|Google play|1|1|
|2|	应用宝|	Application treasure store|	1|3|
|3|	百度应用商店|	Application of TreasureBaidu Handset Assistant|	1|3|
|4|	360手机助手|	360 Handset Assistant	|1|3|
|5|	豌豆荚|	Wandoujia	|1|3|
|6|	酷派应用商店|	Kupai Application Stor	|1|3|
|7|	安智|	Anzhi	|1|3|
|8|	华为应用市场|	HUAWEI Application Store|	1|3|
|9|	91助手|	91 Assistants	|1|3|
|10|	移动MM	|Mobile MM|	1|3|
|11	|PP助手|	PP Assistants|	1|3|
|12|	UC游戏中心|	UC Game Center|	1|3|
|13|	天翼空间|	189 Store |	1|3|
|14|	机锋市场|	GFan |	1|3|
|15|	卓易市场|	Zhuoyi Market 	|1|3|
|16|	小米应用商店|	Millet application store	|1|3|
|17|	魅族应用商店|	MEIZU Application Store	|1|3|
|18|	联想乐商店	|Lenovo Mobile Market|	1|3|
|19|	金立软件商店|	Jinli Software Store |	1|3|
|20|	OPPO软件商店|	OPPO Software Store|	1|3|
|21|	金立游戏大厅|	Jinli Game Center |	1|3|
|22|	VIVO|	VIVO|	1|3|
|26|	其他|	Others|	1|3|
|27|	App Store|	App Store|	2|2|


<span id="cate"></span>
# 6、应用类型

|应用id|应用名称|应用名称(英文)|一级分类id|
|----|----|----|----|
|1|	新闻|	News|	0|
|2|	图书|	Library|	0|
|3|	社交|	Social|	0|
|4|	生活|	Life|	0|
|5|	财务|	Finance|	0|
|6|	娱乐|	Entertain|	0|
|7	|教育|	Education|	0|
|8|	旅行|	Travel|	0|
|9|	导航|	Navigation|	0|
|10	|商业|	Business|	0|
|11|	工具|	Tool|	0|
|12|	效率|	Efficiency|	0|
|13|	健康健美|	Fitness	|0|
|14|	摄影与录像|	Camera|	0|
|15|	商品指南|	Product Guide|	0|
|16|	美食佳饮|	Food and Drink|	0|
|17|	参考|	Reference	|0|
|18|	报刊杂志|	Magazine|	0|
|19|	体育|	Sports|	0|
|20	|天气|	Weather	|0|
|21|	医疗|	Medical Treatment|	0|
|22|	音乐|	Music|	0|
|23|	视频|	Video|	0|
|24|	购物|	Shopping|	0|
|25|	交通|	Traffic|	0|
|26	|游戏|	Game	|0|
|34	|新闻|	News	|1|
|35	|图书|	Library	|2|
|36	|社交|	Social|	3|
|37	|生活|	Life	|4|
|38	|财务|	Finance	|5|
|39	|娱乐|	Entertain	|6|
|40	|教育|	Education	|7|
|41	|旅行|	Travel|	8|
|42	|导航|	Navigation|	9|
|43	|商业|	Business	|10|
|44	|工具|	Tool	|11|
|45	|效率|	Efficiency|	12|
|46	|健康健美|	Fitness|	13|
|47	|摄影与录像	|Camera|	14|
|48	|商品指南|	Product Guide	|15|
|49	|美食佳饮|	Food and Drink|	16|
|50	|参考|	Reference	|17|
|51	|报刊杂志|	Magazine|	18|
|52	|体育|	Sports	|19|
|53	|天气|	Weather	|20|
|54	|医疗|	Medical Treatment	|21|
|55	|音乐|	Music	|22|
|56	|视频|	Video	|23|
|57	|购物|	Shopping	|24|
|58	|交通|	Traffic	|25|
|59	|动作游戏|	Action Game|	26|
|60	|益智解谜|	Puzzle Game|	26|
|61	|卡牌游戏|	Card Game	|26|
|62	|休闲游戏|	Leisure Game	|26|
|63	|竞速游戏|	Race Game|	26|
|64	|角色扮演游戏|	Role-playing Game|	26|
|65	|策略游戏|	Strategy Game	|26|
|66	|网络游戏|	Online Game|	26|
|67	|街机游戏|	Arcade Game	|26|
|68	|聚会游戏|	Party Game|	26|
|69	|冒险游戏|	Adventure Game|	26|
|70	|模拟游戏|	Simulation Game|	26|
|71	|文字游戏|	Word Game	|26|
|72	|问答游戏|	Quiz Game	|26|
|73	|桌面游戏|	Table Game|	26|
|74	|赌场|	Casino	|26|
|75	|教育|	Education	|26|
|76|	儿童|	Child	|26|